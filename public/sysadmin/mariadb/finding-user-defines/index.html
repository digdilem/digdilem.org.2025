<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="description" content="Finding out if a user has any defines** Before DROPping an sql user, itâ€™s sensible to check whether they have ever created any VIEWs, added a TRIGGER or written a stored PROCEDURE. If you donâ€™t, and they did, then deleting the user will result in errors such as MySQL error 1449: The user specified as a definer does not exist
Why does this happen? MariaDb / MySql uses the definerâ€™s permissions to check whether they have authorisation to use that VIEW (which may select from multiple tables), run that STORED PROCEDURE (which may INSERT or DELETE from a table) or run a TRIGGER (again, it may need read/write privs anywhere). Itâ€™s not a bad system and works well, but doesnâ€™t protect itself when that user disappears.">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Finding User Defines :: Digital Dilemma">
    <meta name="twitter:description" content="Finding out if a user has any defines** Before DROPping an sql user, itâ€™s sensible to check whether they have ever created any VIEWs, added a TRIGGER or written a stored PROCEDURE. If you donâ€™t, and they did, then deleting the user will result in errors such as MySQL error 1449: The user specified as a definer does not exist
Why does this happen? MariaDb / MySql uses the definerâ€™s permissions to check whether they have authorisation to use that VIEW (which may select from multiple tables), run that STORED PROCEDURE (which may INSERT or DELETE from a table) or run a TRIGGER (again, it may need read/write privs anywhere). Itâ€™s not a bad system and works well, but doesnâ€™t protect itself when that user disappears.">
    <meta property="og:url" content="https://digdilem.org/sysadmin/mariadb/finding-user-defines/index.html">
    <meta property="og:site_name" content="Digital Dilemma">
    <meta property="og:title" content="Finding User Defines :: Digital Dilemma">
    <meta property="og:description" content="Finding out if a user has any defines** Before DROPping an sql user, itâ€™s sensible to check whether they have ever created any VIEWs, added a TRIGGER or written a stored PROCEDURE. If you donâ€™t, and they did, then deleting the user will result in errors such as MySQL error 1449: The user specified as a definer does not exist
Why does this happen? MariaDb / MySql uses the definerâ€™s permissions to check whether they have authorisation to use that VIEW (which may select from multiple tables), run that STORED PROCEDURE (which may INSERT or DELETE from a table) or run a TRIGGER (again, it may need read/write privs anywhere). Itâ€™s not a bad system and works well, but doesnâ€™t protect itself when that user disappears.">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="website">
    <meta itemprop="name" content="Finding User Defines :: Digital Dilemma">
    <meta itemprop="description" content="Finding out if a user has any defines** Before DROPping an sql user, itâ€™s sensible to check whether they have ever created any VIEWs, added a TRIGGER or written a stored PROCEDURE. If you donâ€™t, and they did, then deleting the user will result in errors such as MySQL error 1449: The user specified as a definer does not exist
Why does this happen? MariaDb / MySql uses the definerâ€™s permissions to check whether they have authorisation to use that VIEW (which may select from multiple tables), run that STORED PROCEDURE (which may INSERT or DELETE from a table) or run a TRIGGER (again, it may need read/write privs anywhere). Itâ€™s not a bad system and works well, but doesnâ€™t protect itself when that user disappears.">
    <meta itemprop="datePublished" content="2025-06-16T13:33:46+01:00">
    <meta itemprop="dateModified" content="2025-06-16T13:33:46+01:00">
    <meta itemprop="wordCount" content="302">
    <meta itemprop="keywords" content="Mariadb,Databases,Sysadmin">
    <title>Finding User Defines :: Digital Dilemma</title>
    <link href="/sysadmin/mariadb/finding-user-defines/index.xml" rel="alternate" type="application/rss+xml" title="Finding User Defines :: Digital Dilemma">
    <link href="/sysadmin/mariadb/finding-user-defines/index.source.md" rel="alternate" type="text/markdown" title="Finding User Defines :: Digital Dilemma">
    <link href="/images/favicon.png?1765899763" rel="icon" type="image/png">
    <link href="/images/favicon.ico?1765899763" rel="icon" type="image/x-icon" sizes="any">
    <link href="/fonts/fontawesome/css/fontawesome-all.min.css?1765899763" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/fonts/fontawesome/css/fontawesome-all.min.css?1765899763" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar/perfect-scrollbar.min.css?1765899763" rel="stylesheet">
    <link href="/css/theme.min.css?1765899763" rel="stylesheet">
    <link href="/css/format-html.min.css?1765899763" rel="stylesheet" id="R-format-style">
    <link href="/css/auto-complete/auto-complete.min.css?1765899763" rel="stylesheet">
    <script src="/js/auto-complete/auto-complete.min.js?1765899763" defer></script>
    <script src="/js/lunr/lunr.min.js?1765899763" defer></script>
    <script src="/js/lunr/lunr.stemmer.support.min.js?1765899763" defer></script>
    <script src="/js/lunr/lunr.multi.min.js?1765899763" defer></script>
    <script src="/js/lunr/lunr.en.min.js?1765899763" defer></script>
    <script src="/js/search.min.js?1765899763" defer></script>
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/sysadmin\/mariadb\/finding-user-defines\/index.html';
      window.relearn.relBasePath='..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='https:\/\/digdilem.org';
      window.relearn.contentLangs=['en'];
      window.relearn.index_js_url="/searchindex.en.js?1765899763";
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=false;
      window.relearn.enableBlockCodeWrap=true;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // variant stuff
      window.relearn.themevariants = [ 'auto' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script><style>
:root {
    --MAIN-WIDTH-MAX: 1000rem;
}
</style>


  </head>
  <body class="mobile-support html" data-url="/sysadmin/mariadb/finding-user-defines/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#finding-out-if-a-user-has-any-defines">Finding out if a user has any defines**</a></li>
        <li><a href="#why-does-this-happen">Why does this happen?</a></li>
        <li><a href="#how-to-check-whether-its-safe-to-drop-the-user">How to check whether it&rsquo;s safe to DROP the user?</a></li>
      </ul>
    </li>
  </ul>
</nav>
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList">
            <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/index.html"><span itemprop="name">Digital Dilemma</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li>
            <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/sysadmin/index.html"><span itemprop="name">Sysadmin</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li>
            <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/sysadmin/mariadb/index.html"><span itemprop="name">Mariadb</span></a><meta itemprop="position" content="3">&nbsp;>&nbsp;</li>
            <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><span itemprop="name">Finding User Defines</span><meta itemprop="position" content="4"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-source" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/sysadmin/mariadb/finding-user-defines/index.source.md" title="Show source code"><i class="fa-fw fas fa-code"></i></a>
            </div>
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/sysadmin/mariadb/3-quick-ways-to-improve-mariadb-memory-handling/index.html" title="3 Quick Ways to Improve Mariadb Memory Handling (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/sysadmin/mariadb/solving-excess-memory-usage-in-mariadb/index.html" title="Solving Excess Memory Usage in Mariadb (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable sysadmin" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="finding-user-defines">Finding User Defines</h1>

<h3 id="finding-out-if-a-user-has-any-defines">Finding out if a user has any defines**</h3>
<p>Before DROPping an sql user, it&rsquo;s sensible to check whether they have ever created any VIEWs, added a TRIGGER or written a stored PROCEDURE. If you don&rsquo;t, and they did, then deleting the user will result in errors such as <code>MySQL error 1449: The user specified as a definer does not exist</code></p>
<h3 id="why-does-this-happen">Why does this happen?</h3>
<p>MariaDb / MySql uses the definer&rsquo;s permissions to check whether they have authorisation to use that VIEW (which may select from multiple tables), run that STORED PROCEDURE (which may INSERT or DELETE from a table) or run a TRIGGER (again, it may need read/write privs anywhere). It&rsquo;s not a bad system and works well, but doesn&rsquo;t protect itself when that user disappears.</p>
<h3 id="how-to-check-whether-its-safe-to-drop-the-user">How to check whether it&rsquo;s safe to DROP the user?</h3>
<p>Fortunately, this information is stored in the meta database, <code>INFORMATION_SCHEMA</code>, so we can run a query to search it for a given user. Change USERNAME in this for the user you want to check (leaving the % wildcard at the end) and run it. If it returns results, then you will need to reconsider DROPping this user. (GUI tools will let you recreate the PROCEDURE etc, but beware that they usally DROP the routine before recreating it. Fine â€“ except that <strong>any grants given specifically to that VIEW/PROCEDURE/TRIGGER will be automatically removed from any users that have them.</strong></p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>SET @uname = &#39;USERNAME%&#39;;

USE INFORMATION_SCHEMA;

SELECT &#39;VIEW&#39; AS OBJECT_TYPE, TABLE_SCHEMA, TABLE_NAME, DEFINER FROM views WHERE DEFINER LIKE @uname
UNION ALL
SELECT &#39;TRIGGER&#39; AS OBJECT_TYPE, TRIGGER_SCHEMA, TRIGGER_NAME, DEFINER FROM TRIGGERS WHERE DEFINER LIKE @uname
UNION ALL
SELECT ROUTINE_TYPE AS OBJECT_TYPE, ROUTINE_SCHEMA, ROUTINE_NAME, DEFINER FROM ROUTINES WHERE DEFINER LIKE @uname</code></pre></div>
<p>Credit to <a href="https://www.pythian.com/blog/technical-track/properly-removing-users-mysql" rel="external" target="_blank">Pythian</a> for the original idea, although I&rsquo;ve changed this check a fair bit to suit my needs.</p>

  <footer class="footline">
              <i class='fa-fw fas fa-calendar'></i> Jun 16, 2025
<div class="R-taxonomy taxonomy-categories cstyle" title="Categories" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <i class="fa-fw fas fa-layer-group"></i>
  <ul>
    <li><a class="term-link" href="/categories/databases/index.html">Databases</a></li>
    <li><a class="term-link" href="/categories/mariadb/index.html">Mariadb</a></li>
    <li><a class="term-link" href="/categories/sysadmin/index.html">Sysadmin</a></li>
  </ul>
</div>
  </footer>
</article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
          <a id="R-logo" class="R-default" href="/index.html">
            <div class="logo-title">Digital Dilemma</div>
          </a>
        </div>
        <search><form action="/search/index.html" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </form></search>
      </div>
      <div id="R-homelinks" class="default-animation">
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-homelinks">
          <ul class="space collapsible-menu">
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-headercontrols">
          <ul class="">
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div class="R-sidebarmenu R-shortcutmenu-main">
          <ul class="enlarge morespace collapsible-menu">
            <li class="" data-nav-id="/about/index.html"><a class="padding" href="/about/index.html">About<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-77102f70526b1c2db0eced54632dc618" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/dartmoor/index.html"><a class="padding" href="/dartmoor/index.html">Dartmoor<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="/home-automation/index.html"><a class="padding" href="/home-automation/index.html">Home Automation<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-5414c68938d2d977e695711a62c241e2" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/misc/index.html"><a class="padding" href="/misc/index.html">Misc<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-f243eab41fb28f51378992bf36c41035" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/shawn/index.html"><a class="padding" href="/shawn/index.html">Remote Controlled Lawnmower<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="/software/index.html"><a class="padding" href="/software/index.html">Software<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="parent " data-nav-id="/sysadmin/index.html"><a class="padding" href="/sysadmin/index.html">Sysadmin<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-40737dc2a8a1439ce96242bc284e17bf" class="collapsible-menu">
            <li class="" data-nav-id="/sysadmin/backing-up-data/index.html"><a class="padding" href="/sysadmin/backing-up-data/index.html">Backing Up Important Data<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="/sysadmin/docker/index.html"><a class="padding" href="/sysadmin/docker/index.html">Docker<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-d62cf93067a0c358dd7f7f29b0175b6f" class="collapsible-menu"></ul></li>
            <li class="parent " data-nav-id="/sysadmin/mariadb/index.html"><a class="padding" href="/sysadmin/mariadb/index.html">Mariadb<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-20c4ec8b56f40f5cdc5ced0fd6f1fe9d" class="collapsible-menu">
            <li class="" data-nav-id="/sysadmin/mariadb/3-quick-ways-to-improve-mariadb-memory-handling/index.html"><a class="padding" href="/sysadmin/mariadb/3-quick-ways-to-improve-mariadb-memory-handling/index.html">3 Quick Ways to Improve Mariadb Memory Handling<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="active " data-nav-id="/sysadmin/mariadb/finding-user-defines/index.html"><a class="padding" href="/sysadmin/mariadb/finding-user-defines/index.html">Finding User Defines<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-id="/sysadmin/mariadb/solving-excess-memory-usage-in-mariadb/index.html"><a class="padding" href="/sysadmin/mariadb/solving-excess-memory-usage-in-mariadb/index.html">Solving Excess Memory Usage in Mariadb<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
            <li class="" data-nav-id="/sysadmin/ugreen-nas/index.html"><a class="padding" href="/sysadmin/ugreen-nas/index.html">UGreen NAS DXP2800<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-2858c2d9be26e26508c6136daea5315d" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/sysadmin/zabbix/index.html"><a class="padding" href="/sysadmin/zabbix/index.html">Zabbix<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-b475e8919aecc12318fd1ab81e30fbcd" class="collapsible-menu"></ul></li></ul></li>
            <li class="" data-nav-id="/text-adventures/index.html"><a class="padding" href="/text-adventures/index.html">Text Adventures<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-b8682231e4a25192a398ef39466f74f9" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/thoughts/index.html"><a class="padding" href="/thoughts/index.html">Thoughts<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-6520c659975ef8a296a067b97df65739" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/vehicles/index.html"><a class="padding" href="/vehicles/index.html">Vehicles<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-77d72abac0d5f3866605d48ffe77e064" class="collapsible-menu"></ul></li>
          </ul>
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-shortcuts">
          <ul class="space collapsible-menu">
          </ul>
        </div>
        <div id="R-footer-margin"></div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-footercontrols">
          <ul class="">
            <li class="R-historyclearer">
              <div class="padding menu-control">
                <i class="fa-fw fas fa-history"></i>
                <span>&nbsp;</span>
                <div class="control-style">
                  <button>Clear History</button>
                </div>
                <div class="clear"></div>
              </div>
            </li>
          </ul>
        </div>
<div id="R-footer"><p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p>

<script defer src="https://stats99.digdilem.org/script.js" data-website-id="fb31ac8c-8b3f-4b39-ad89-aac6afc9ac4f"></script>

</div>
      </div>
    </aside>
    <script src="/js/clipboard/clipboard.min.js?1765899763" defer></script>
    <script src="/js/perfect-scrollbar/perfect-scrollbar.min.js?1765899763" defer></script>
    <script src="/js/theme.min.js?1765899763" defer></script>
  </body>
</html>
